---
alwaysApply: false
description: "FastAdmin LDCMS多模板系统开发标准 - 支持多套主题模板和自定义模板开发，包含模板架构、主题切换、文件组织、响应式设计等多模板系统的完整开发规范。"
---

# FastAdmin LDCMS多模板系统开发标准规范

> **支持多套主题模板和自定义模板开发的企业网站管理系统**
> **技术栈**: FastAdmin + LDCMS + ThinkPHP 5.1 + Bootstrap + AdminLTE

---

## 🎨 多模板系统架构原理

### 模板管理核心机制
- **文件系统扫描**: 通过`ThemeService::getThemeList()`自动发现模板
- **语言模板映射**: `fa_ldcms_langs`表中`template`字段指定模板目录
- **无需额外表**: 不依赖主题表，完全基于文件系统和语言配置
- **热切换支持**: 后台一键切换，无需重启服务

### 模板发现机制
```php
// ThemeService::getThemeList() 工作原理
public static function getThemeList()
{
    $themePath = ADDON_PATH . 'ldcms' . DS . 'view' . DS;
    $themes = [];
    
    if (is_dir($themePath)) {
        $dirs = scandir($themePath);
        foreach ($dirs as $dir) {
            if ($dir !== '.' && $dir !== '..' && is_dir($themePath . $dir)) {
                $themes[] = [
                    'name' => $dir,
                    'title' => self::getThemeTitle($dir),
                    'path' => $themePath . $dir,
                    'install' => self::checkThemeInstall($dir)
                ];
            }
        }
    }
    
    return $themes;
}
```

---

## 📁 模板目录结构标准

### 标准模板目录结构
```
addons/ldcms/view/template-name/
├── index.html              # 首页模板 (必需)
├── list.html               # 列表页模板 (必需)
├── detail.html             # 详情页模板 (必需)
├── search.html             # 搜索页模板 (可选)
├── tag.html               # 标签页模板 (可选)
├── page.html              # 单页模板 (可选)
├── head.html              # 头部文件 (必需)
├── footer.html            # 底部文件 (必需)
├── nav.html               # 导航文件 (可选)
├── sidebar.html           # 侧边栏文件 (可选)
├── breadcrumb.html        # 面包屑文件 (可选)
├── info.ini               # 模板信息文件 (v1.2+)
└── screenshot.jpg         # 模板预览图 (推荐)
```

### 模板信息文件 (info.ini)
```ini
[template]
name = "BiuBiuStar2025企业模板"
version = "1.0.0"
author = "BiuBiuStar Team"
description = "适合企业官网的现代化响应式模板"
demo_url = "https://demo.biubiustar.com"
support_url = "https://support.biubiustar.com"

[requirements]
ldcms_version = ">=1.2.0"
php_version = ">=7.1"
mysql_version = ">=5.6"

[features]
responsive = true
multilanguage = true
seo_optimized = true
admin_compatible = true

[languages]
supported[] = "zh-cn"
supported[] = "en"
supported[] = "zh-tw"
supported[] = "vi-vn"

[assets]
css[] = "css/style.min.css"
css[] = "css/responsive.css"
js[] = "js/app.min.js"
js[] = "js/plugins.js"
```

---

## 🎯 模板开发规范

### 1. 模板文件基础结构

#### 首页模板 (index.html)
```html
<!DOCTYPE html>
<html dir="{$lang_direction}" lang="{$current_lang}">
<head>
    {include file="head" /}
</head>
<body class="home-page lang-{$current_lang}">
    <!-- 导航区域 -->
    {include file="nav" /}
    
    <!-- 轮播图区域 -->
    <section class="hero-section">
        {ld:slide name="banner"}
        <div class="slide-item">
            <div class="slide-bg" style="background-image: url('{$item.image}')">
                <div class="slide-content">
                    <h1 class="slide-title">{$item.title}</h1>
                    <p class="slide-desc">{$item.description}</p>
                    {if !empty($item.url)}
                    <a href="{$item.url}" class="btn btn-primary">{:lang('Learn More')}</a>
                    {/if}
                </div>
            </div>
        </div>
        {/ld:slide}
    </section>
    
    <!-- 产品展示区域 -->
    {ld:action action="home_block" model_table_name="product" alias="cate"}
    <section class="products-section">
        <div class="container">
            <div class="section-header">
                <h2>{$cate.name}</h2>
                <p>{$cate.ename}</p>
            </div>
            <div class="products-grid">
                {ld:list cid="$cate['id']" limit='8'}
                <div class="product-item">
                    <div class="product-image">
                        <img src="{$item.image|default='/assets/addons/ldcms/default/images/no-image.jpg'}" alt="{$item.title}">
                    </div>
                    <div class="product-info">
                        <h3><a href="{$item.url}">{$item.title}</a></h3>
                        <p class="price">{$item.price|default='询价'}</p>
                    </div>
                </div>
                {/ld:list}
            </div>
        </div>
    </section>
    {/ld:action}
    
    <!-- 底部区域 -->
    {include file="footer" /}
</body>
</html>
```

#### 列表页模板 (list.html)
```html
<!DOCTYPE html>
<html dir="{$lang_direction}" lang="{$current_lang}">
<head>
    {include file="head" /}
</head>
<body class="list-page lang-{$current_lang}">
    {include file="nav" /}
    
    <!-- 面包屑导航 -->
    {include file="breadcrumb" /}
    
    <!-- 主要内容区域 -->
    <main class="main-content">
        <div class="container">
            <div class="row">
                <!-- 内容区域 -->
                <div class="col-lg-9">
                    <div class="category-header">
                        <h1>{$category.name}</h1>
                        {if !empty($category.description)}
                        <p class="category-desc">{$category.description}</p>
                        {/if}
                    </div>
                    
                    <!-- 内容列表 -->
                    <div class="content-list">
                        {ld:list cid="$category.id" page="true"}
                        <article class="list-item">
                            <div class="item-image">
                                <img src="{$item.image|default='/assets/addons/ldcms/default/images/no-image.jpg'}" alt="{$item.title}">
                            </div>
                            <div class="item-content">
                                <h3><a href="{$item.url}">{$item.title}</a></h3>
                                <div class="item-meta">
                                    <span class="date">{$item.show_time|ld_fdate='Y-m-d'}</span>
                                    <span class="category">{$item.category_name}</span>
                                </div>
                                <p class="item-excerpt">{$item.description|ld_str_cut='150'}</p>
                            </div>
                        </article>
                        {/ld:list}
                    </div>
                    
                    <!-- 分页 -->
                    <div class="pagination-wrapper">
                        {$pages}
                    </div>
                </div>
                
                <!-- 侧边栏 -->
                <div class="col-lg-3">
                    {include file="sidebar" /}
                </div>
            </div>
        </div>
    </main>
    
    {include file="footer" /}
</body>
</html>
```

#### 详情页模板 (detail.html)
```html
<!DOCTYPE html>
<html dir="{$lang_direction}" lang="{$current_lang}">
<head>
    {include file="head" /}
    
    <!-- 详情页特定SEO -->
    <title>{$content.title} - {$category.name} - {$ld.sitetitle}</title>
    <meta name="description" content="{$content.description|ld_str_cut='160'}">
    <meta name="keywords" content="{$content.keywords}">
    
    <!-- 开放图谱 -->
    <meta property="og:title" content="{$content.title}">
    <meta property="og:description" content="{$content.description|ld_str_cut='160'}">
    <meta property="og:image" content="{$content.image}">
    <meta property="og:url" content="{$content.url}">
</head>
<body class="detail-page lang-{$current_lang}">
    {include file="nav" /}
    {include file="breadcrumb" /}
    
    <main class="main-content">
        <div class="container">
            <div class="row">
                <div class="col-lg-9">
                    <article class="content-detail">
                        <header class="content-header">
                            <h1>{$content.title}</h1>
                            <div class="content-meta">
                                <span class="date">{$content.show_time|ld_fdate='Y-m-d H:i'}</span>
                                <span class="category">{$category.name}</span>
                                <span class="views">阅读: {$content.views}</span>
                            </div>
                        </header>
                        
                        <div class="content-body">
                            {$content.content|raw}
                        </div>
                        
                        <!-- 标签 -->
                        {if !empty($content.tags)}
                        <div class="content-tags">
                            <span class="tags-label">标签:</span>
                            {volist name="content.tags" id="tag"}
                            <a href="{:addon_url('ldcms/tag/index', ['tag' => $tag])}" class="tag-link">{$tag}</a>
                            {/volist}
                        </div>
                        {/if}
                        
                        <!-- 上一篇下一篇 -->
                        <div class="content-navigation">
                            {if !empty($prev)}
                            <div class="prev-post">
                                <span>上一篇:</span>
                                <a href="{$prev.url}">{$prev.title}</a>
                            </div>
                            {/if}
                            {if !empty($next)}
                            <div class="next-post">
                                <span>下一篇:</span>
                                <a href="{$next.url}">{$next.title}</a>
                            </div>
                            {/if}
                        </div>
                    </article>
                </div>
                
                <div class="col-lg-3">
                    {include file="sidebar" /}
                </div>
            </div>
        </div>
    </main>
    
    {include file="footer" /}
</body>
</html>
```

### 2. 头部文件模板 (head.html)
```html
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- 基础SEO -->
<title>{$seo_title|default=$ld.sitetitle}</title>
<meta name="description" content="{$seo_description|default=$ld.seo_description}">
<meta name="keywords" content="{$seo_keywords|default=$ld.seo_keywords}">
<meta name="author" content="{$ld.sitetitle}">

<!-- 网站图标 -->
<link rel="shortcut icon" href="{$ld.favicon|default='/favicon.ico'}">
<link rel="apple-touch-icon" href="{$ld.apple_icon|default='/apple-touch-icon.png'}">

<!-- CSS文件 -->
<link rel="stylesheet" href="{ld:src src='libs/bootstrap/bootstrap.min.css'}">
<link rel="stylesheet" href="{ld:src src='libs/fontawesome/all.min.css'}">
<link rel="stylesheet" href="{ld:src src='libs/swiper/swiper-bundle.min.css'}">
<link rel="stylesheet" href="{ld:src src='libs/animate.css/animate.min.css'}">
<link rel="stylesheet" href="{ld:src src='css/style.min.css'}">

<!-- 语言特定样式 -->
{if $current_lang == 'zh-tw'}
<link rel="stylesheet" href="{ld:src src='css/traditional-chinese.css'}">
{elseif $current_lang == 'ar'}
<link rel="stylesheet" href="{ld:src src='css/rtl.css'}">
{elseif in_array($current_lang, ['ja', 'ko'])}
<link rel="stylesheet" href="{ld:src src='css/cjk.css'}">
{/if}

<!-- 多语言hreflang -->
{ld:langs}
{volist name="langs" id="lang"}
<link rel="alternate" hreflang="{$lang.code}" href="{$lang.url}">
{/volist}
{/ld:langs}

<!-- 结构化数据 -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{$ld.sitetitle}",
    "url": "{:addon_url('ldcms/index/index', [], true)}",
    "description": "{$ld.seo_description}",
    "inLanguage": "{$current_lang}",
    "potentialAction": {
        "@type": "SearchAction",
        "target": "{:addon_url('ldcms/search/index', [], true)}?keyword={literal}{search_term_string}{/literal}",
        "query-input": "required name=search_term_string"
    }
}
</script>
```

### 3. 底部文件模板 (footer.html)
```html
<!-- JavaScript文件 -->
<script src="__CDN__/assets/libs/jquery/dist/jquery.min.js"></script>
<script src="{ld:src src='libs/bootstrap/bootstrap.bundle.min.js'}"></script>
<script src="{ld:src src='libs/swiper/swiper-bundle.min.js'}"></script>
<script src="{ld:src src='libs/wow.js/wow.min.js'}"></script>
<script src="{ld:src src='libs/aos/aos.js'}"></script>
<script src="{ld:src src='js/app.min.js'}"></script>

<!-- 多语言JavaScript配置 -->
<script>
window.LDCMS = {
    lang: '{$current_lang}',
    baseUrl: '{:addon_url("ldcms/index/index", [], true)}',
    apiUrl: '{:addon_url("ldcms/api/", [], true)}',
    i18n: {
        loading: '{:lang("Loading...")}',
        error: '{:lang("Error occurred")}',
        success: '{:lang("Success")}',
        confirm: '{:lang("Are you sure?")}'
    }
};
</script>

<!-- 语言特定JavaScript -->
{if $current_lang == 'zh-cn'}
<script src="{ld:src src='js/lang/zh-cn.js'}"></script>
{elseif $current_lang == 'en'}
<script src="{ld:src src='js/lang/en.js'}"></script>
{/if}

<!-- 统计代码 -->
{if !empty($ld.analytics_code)}
{$ld.analytics_code|raw}
{/if}
```

---

## 🎨 静态资源管理规范

### 资源目录结构
```
public/assets/addons/ldcms/template-name/
├── css/
│   ├── style.css              # 主样式文件
│   ├── style.min.css          # 压缩版主样式
│   ├── responsive.css         # 响应式样式
│   ├── traditional-chinese.css # 繁体中文样式
│   ├── rtl.css               # RTL语言样式
│   └── cjk.css               # 中日韩语言样式
├── js/
│   ├── app.js                # 主JavaScript文件
│   ├── app.min.js            # 压缩版JavaScript
│   ├── plugins.js            # 插件集合
│   └── lang/                 # 多语言JavaScript
│       ├── zh-cn.js
│       ├── en.js
│       └── zh-tw.js
├── images/
│   ├── logo.png              # 网站Logo
│   ├── logo-dark.png         # 深色版Logo
│   ├── no-image.jpg          # 默认占位图
│   ├── bg/                   # 背景图片
│   ├── icons/                # 图标文件
│   └── banners/              # 轮播图
├── fonts/
│   ├── iconfont.woff         # 图标字体
│   └── custom/               # 自定义字体
└── libs/                     # 第三方库
    ├── bootstrap/
    ├── fontawesome/
    ├── swiper/
    └── animate.css/
```

### 资源引用最佳实践
```html
<!-- 推荐：使用{ld:src}标签 -->
<link rel="stylesheet" href="{ld:src src='css/style.min.css'}">
<script src="{ld:src src='js/app.min.js'}"></script>
<img src="{ld:src src='images/logo.png'}" alt="Logo">

<!-- 兼容：使用__ADDON__替换 -->
<link rel="stylesheet" href="__ADDON__/css/style.min.css">
<script src="__ADDON__/js/app.min.js"></script>

<!-- 条件加载：根据语言和设备 -->
{if $current_lang == 'ar'}
<link rel="stylesheet" href="{ld:src src='css/rtl.css'}">
{/if}

{if $is_mobile}
<script src="{ld:src src='js/mobile.min.js'}"></script>
{/if}
```

---

## 📱 响应式设计规范

### 断点标准
```css
/* 标准断点 */
/* Extra small devices (portrait phones) */
@media (max-width: 575.98px) { ... }

/* Small devices (landscape phones) */
@media (min-width: 576px) and (max-width: 767.98px) { ... }

/* Medium devices (tablets) */
@media (min-width: 768px) and (max-width: 991.98px) { ... }

/* Large devices (desktops) */
@media (min-width: 992px) and (max-width: 1199.98px) { ... }

/* Extra large devices (large desktops) */
@media (min-width: 1200px) { ... }
```

### 响应式组件示例
```css
/* 响应式导航 */
.navbar {
    transition: all 0.3s ease;
}

@media (max-width: 991.98px) {
    .navbar-nav {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: #fff;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .navbar-nav.show {
        display: block;
    }
    
    .navbar-toggler {
        display: block;
    }
}

/* 响应式网格 */
.product-grid {
    display: grid;
    gap: 20px;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}

@media (max-width: 767.98px) {
    .product-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
}

/* 响应式字体 */
.hero-title {
    font-size: clamp(1.5rem, 4vw, 3rem);
    line-height: 1.2;
}
```

---

## 🔧 模板功能扩展

### 自定义标签开发
```php
// 在addons/ldcms/library/taglib/目录下创建自定义标签
namespace addons\ldcms\library\taglib;

use think\template\TagLib;

class Custom extends TagLib
{
    // 自定义标签定义
    protected $tags = [
        'gallery'  => ['attr' => 'name,limit,type', 'close' => 1],
        'contact'  => ['attr' => 'type', 'close' => 1],
        'weather'  => ['attr' => 'city', 'close' => 0],
    ];
    
    // 图片画廊标签
    public function tagGallery($tag, $content)
    {
        $name = $tag['name'];
        $limit = isset($tag['limit']) ? $tag['limit'] : 10;
        $type = isset($tag['type']) ? $tag['type'] : 'image';
        
        $parse = '<?php ';
        $parse .= '$gallery = \\addons\\ldcms\\model\\Gallery::getGallery("'.$name.'", '.$limit.', "'.$type.'");';
        $parse .= 'if($gallery): foreach($gallery as $key => $item): ?>';
        $parse .= $content;
        $parse .= '<?php endforeach; endif; ?>';
        
        return $parse;
    }
}
```

### 模板配置文件
```php
// 模板配置文件：addons/ldcms/view/template-name/config.php
return [
    'template' => [
        'name' => 'BiuBiuStar2025企业模板',
        'version' => '1.0.0',
        'author' => 'BiuBiuStar Team',
        'description' => '现代化企业官网模板',
    ],
    
    'settings' => [
        'primary_color' => '#007bff',
        'secondary_color' => '#6c757d',
        'font_family' => 'Roboto, sans-serif',
        'logo_height' => '40px',
        'enable_animations' => true,
        'enable_lazy_loading' => true,
    ],
    
    'features' => [
        'responsive' => true,
        'multilanguage' => true,
        'seo_optimized' => true,
        'accessibility' => true,
        'performance_optimized' => true,
    ],
    
    'requirements' => [
        'ldcms_version' => '>=1.2.0',
        'php_version' => '>=7.1',
        'mysql_version' => '>=5.6',
    ]
];
```

---

## 🚀 性能优化规范

### CSS优化
```css
/* 关键CSS内联 */
<style>
/* 首屏关键样式 */
.header { ... }
.hero-section { ... }
.navigation { ... }
</style>

/* 非关键CSS延迟加载 */
<link rel="preload" href="{ld:src src='css/style.min.css'}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{ld:src src='css/style.min.css'}"></noscript>
```

### JavaScript优化
```html
<!-- 关键JavaScript延迟加载 -->
<script defer src="{ld:src src='js/app.min.js'}"></script>

<!-- 非关键功能异步加载 -->
<script>
// 懒加载非关键功能
document.addEventListener('DOMContentLoaded', function() {
    // 延迟加载第三方插件
    setTimeout(function() {
        loadScript('{ld:src src="js/plugins.min.js"}');
    }, 2000);
});

function loadScript(src) {
    const script = document.createElement('script');
    script.src = src;
    script.async = true;
    document.head.appendChild(script);
}
</script>
```

### 图片优化
```html
<!-- 响应式图片 -->
<picture>
    <source media="(min-width: 768px)" srcset="{$item.image|replace='.jpg', '_large.jpg'}">
    <source media="(min-width: 480px)" srcset="{$item.image|replace='.jpg', '_medium.jpg'}">
    <img src="{$item.image|replace='.jpg', '_small.jpg'}" alt="{$item.title}" loading="lazy">
</picture>

<!-- WebP格式支持 -->
<picture>
    <source type="image/webp" srcset="{$item.image|replace='.jpg', '.webp'}">
    <img src="{$item.image}" alt="{$item.title}" loading="lazy">
</picture>
```

---

## �� 模板开发检查清单

### 基础文件检查
- [ ] 所有必需模板文件存在
- [ ] info.ini配置文件完整
- [ ] screenshot.jpg预览图添加
- [ ] 模板信息配置正确

### 功能完整性检查
- [ ] 首页模板功能完整
- [ ] 列表页分页正常
- [ ] 详情页上下篇导航
- [ ] 搜索功能正常
- [ ] 面包屑导航正确

### 多语言支持检查
- [ ] 模板支持配置的所有语言
- [ ] 语言特定样式适配
- [ ] RTL语言支持（如需要）
- [ ] 字体选择合适

### 响应式设计检查
- [ ] 桌面端显示正常
- [ ] 平板端适配良好
- [ ] 移动端体验优秀
- [ ] 触摸操作友好

### SEO优化检查
- [ ] 标题标签优化
- [ ] 元描述设置
- [ ] 结构化数据添加
- [ ] 图片alt属性完善

### 性能优化检查
- [ ] CSS文件压缩
- [ ] JavaScript文件压缩
- [ ] 图片格式优化
- [ ] 资源加载优化

---

**注意**: 本规范适用于FastAdmin LDCMS v1.2+版本的多模板系统开发。
