# FastAdmin LDCMS ä¼ä¸šç½‘ç«™ç®¡ç†ç³»ç»Ÿå¼€å‘æ ‡å‡†è§„èŒƒ

> **åŸºäºFastAdmin + ThinkPHP + Uniappçš„ä¼ä¸šç½‘ç«™ç®¡ç†ç³»ç»Ÿ**
> **ç‰ˆæœ¬è¦æ±‚**: LDCMS >= 1.2.0, ThinkPHP 5.1, FastAdminåŸºç¡€æ¡†æ¶

---

## ğŸ¯ æ ¸å¿ƒæ¶æ„ç†è§£

### ğŸ“ LDCMSç›®å½•ç»“æ„æ ‡å‡†
```
addons/ldcms/
â”œâ”€â”€ view/              # å‰å°æ¨¡æ¿ç›®å½•
â”‚   â”œâ”€â”€ default/       # é»˜è®¤ä¸­æ–‡æ¨¡æ¿
â”‚   â”œâ”€â”€ en/           # è‹±æ–‡æ¨¡æ¿
â”‚   â”œâ”€â”€ biubiustar2025zh-cn/  # è‡ªå®šä¹‰æ¨¡æ¿ç»„
â”‚   â””â”€â”€ [custom]/     # å…¶ä»–è‡ªå®šä¹‰æ¨¡æ¿
â”œâ”€â”€ controller/       # æ§åˆ¶å™¨
â”œâ”€â”€ model/           # æ•°æ®æ¨¡å‹
â”œâ”€â”€ validate/        # éªŒè¯å™¨
â”œâ”€â”€ library/         # ç±»åº“æ–‡ä»¶
â””â”€â”€ utils/          # å·¥å…·ç±»
```

### ğŸ—„ï¸ LDCMSæ ¸å¿ƒæ•°æ®è¡¨
| è¡¨å | ä½œç”¨ | é‡è¦æ€§ |
|------|------|--------|
| `fa_ldcms_langs` | **å¤šè¯­è¨€é…ç½®è¡¨** - æ¨¡æ¿ç®¡ç†æ ¸å¿ƒ | â­â­â­â­â­ |
| `fa_ldcms_category` | æ ç›®åˆ†ç±»è¡¨ | â­â­â­â­â­ |
| `fa_ldcms_document` | æ–‡æ¡£å†…å®¹è¡¨ | â­â­â­â­â­ |
| `fa_ldcms_ad` | å¹¿å‘Š/è½®æ’­å›¾è¡¨ | â­â­â­â­ |
| `fa_ldcms_siteinfo` | ç«™ç‚¹ä¿¡æ¯è¡¨ | â­â­â­â­ |

---

## ğŸ¨ æ¨¡æ¿ç³»ç»Ÿæ ¸å¿ƒè§„èŒƒ

### æ¨¡æ¿ç®¡ç†æœºåˆ¶
- **ä¸ä¾èµ–é¢å¤–ä¸»é¢˜è¡¨**: LDCMSæ¨¡æ¿ç®¡ç†å®Œå…¨åŸºäº`fa_ldcms_langs`è¡¨å’Œæ–‡ä»¶ç³»ç»Ÿæ‰«æ
- **æ¨¡æ¿å‘ç°æœºåˆ¶**: é€šè¿‡`ThemeService::getThemeList()`æ‰«æ`addons/ldcms/view/`ç›®å½•
- **è¯­è¨€æ¨¡æ¿æ˜ å°„**: æ¯ä¸ªè¯­è¨€è®°å½•çš„`template`å­—æ®µæŒ‡å®šå¯¹åº”æ¨¡æ¿ç›®å½•

### é™æ€èµ„æºå¼•å…¥è§„èŒƒ
```html
<!-- æ¨èæ–¹å¼ï¼š{ld:src}æ ‡ç­¾ (LDCMSä¸“ç”¨) -->
{ld:src src="css/style.css"}
{ld:src src="js/app.js"}

<!-- å…¼å®¹æ–¹å¼ï¼š__ADDON__æ›¿æ¢ -->
<link rel="stylesheet" href="__ADDON__/css/style.css">

<!-- é™æ€èµ„æºä½ç½® -->
public/assets/addons/ldcms/template-name/
```

---

## ğŸ·ï¸ LDCMSæ ‡ç­¾ç³»ç»Ÿè§„èŒƒ

### æ ¸å¿ƒæ ‡ç­¾ä½¿ç”¨

#### 1. å¯¼èˆªæ ‡ç­¾
```html
{ld:nav}
<li class="{if $item['id']==$topid}active{/if}">
    <a href="{$item.url}">{$item.name}</a>
</li>
{/ld:nav}
```

#### 2. è½®æ’­å›¾æ ‡ç­¾
```html
{ld:slide name="banner"}
<div class="slide-item">
    <a href="{$item.url}" target="{$item.target}">
        <img src="{$item.image}" alt="{$item.title}" />
    </a>
</div>
{/ld:slide}
```

#### 3. å†…å®¹åˆ—è¡¨æ ‡ç­¾
```html
{ld:list cid="$category.id" limit="10"}
<article class="news-item">
    <h3><a href="{$item.url}">{$item.title}</a></h3>
    <div class="meta">
        <span class="date">{$item.show_time|ld_fdate='Y-m-d'}</span>
    </div>
</article>
{/ld:list}
```

---

## ğŸ’¾ æ•°æ®æ¨¡å‹å¼€å‘è§„èŒƒ

### Categoryæ¨¡å‹å­—æ®µè®¿é—®
```php
// Categoryæ¨¡å‹å¿…éœ€å­—æ®µ
protected $append = [
    'url',
    'ename'  // å¿…é¡»åŒ…å«ï¼Œç”¨äºæ¨¡æ¿æ˜¾ç¤º
];

// å­—æ®µè®¿é—®å™¨
public function getEnameAttr($value, $data)
{
    return isset($data['ename']) && !empty($data['ename']) 
        ? $data['ename'] 
        : $data['name'];
}
```

### Documentæ¨¡å‹å­—æ®µè®¿é—®
```php
// Documentæ¨¡å‹å¿…éœ€å­—æ®µ
protected $append = [
    'url',
    'seo_description',
    'description',
    'curl',
    'price'  // äº§å“æ¨¡å‹å¸¸ç”¨å­—æ®µ
];
```

---

## ğŸŒ å¤šè¯­è¨€æ”¯æŒè§„èŒƒ

### è¯­è¨€é…ç½®æ ‡å‡†
```sql
-- fa_ldcms_langsè¡¨å¿…éœ€å­—æ®µ
INSERT INTO fa_ldcms_langs VALUES
(1, 'zh-cn', 'ç®€ä½“ä¸­æ–‡', 'biubiustar2025zh-cn', 1, 1, 1),
(2, 'en', 'English', 'biubiustar2025en', 0, 1, 2);
```

---

## âš ï¸ å¸¸è§é—®é¢˜å¤„ç†

### æ¨¡æ¿æ— æ³•è®¿é—®é—®é¢˜æ’æŸ¥
1. **æ£€æŸ¥fa_ldcms_langsè¡¨é…ç½®**
   - éªŒè¯language codeä¸ä¸ºç©º
   - ç¡®è®¤templateå­—æ®µæŒ‡å‘æ­£ç¡®æ¨¡æ¿ç›®å½•
   - æ£€æŸ¥is_defaultå’Œstatuså­—æ®µ

2. **æ£€æŸ¥æ¨¡å‹å­—æ®µè®¿é—®**
   - Categoryæ¨¡å‹å¿…é¡»åŒ…å«enameå­—æ®µè®¿é—®å™¨
   - Documentæ¨¡å‹å¿…é¡»åŒ…å«priceç­‰ä¸šåŠ¡å­—æ®µ
   - ç¡®ä¿æ‰€æœ‰appendå­—æ®µéƒ½æœ‰å¯¹åº”è®¿é—®å™¨

3. **æ£€æŸ¥é™æ€èµ„æº**
   - éªŒè¯public/assets/addons/ldcms/ç›®å½•ç»“æ„
   - ç¡®è®¤æ¨¡æ¿ä½¿ç”¨{ld:src}æ ‡ç­¾å¼•ç”¨èµ„æº

---

**æ³¨æ„**: æœ¬è§„èŒƒåŸºäºLDCMS v1.2+ç‰ˆæœ¬ï¼Œè¯·æ ¹æ®å®é™…ä½¿ç”¨çš„ç‰ˆæœ¬è°ƒæ•´ç›¸å…³é…ç½®ã€‚
