# FastAdmin LDCMSå¤šè¯­è¨€å¼€å‘æ ‡å‡†è§„èŒƒ

> **æ”¯æŒä¸­è‹±æ—¥éŸ©ç­‰å¤šè¯­è¨€å›½é™…åŒ–åŠŸèƒ½çš„ä¼ä¸šç½‘ç«™ç®¡ç†ç³»ç»Ÿ**
> **æŠ€æœ¯æ ˆ**: FastAdmin + LDCMS + ThinkPHP 5.1

---

## ğŸŒ å¤šè¯­è¨€æ¶æ„æ ¸å¿ƒåŸç†

### è¯­è¨€ç®¡ç†åŸºç¡€
- **æ ¸å¿ƒè¡¨**: `fa_ldcms_langs` - æ‰€æœ‰è¯­è¨€é…ç½®çš„ä¸­æ¢
- **æ¨¡æ¿æ˜ å°„**: æ¯ä¸ªè¯­è¨€å¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡æ¿ç›®å½•
- **è‡ªåŠ¨åˆ‡æ¢**: æ”¯æŒåŸŸåã€è·¯å¾„ã€ç”¨æˆ·é€‰æ‹©å¤šç§åˆ‡æ¢æ–¹å¼
- **SEOä¼˜åŒ–**: æ¯ä¸ªè¯­è¨€ç‰ˆæœ¬ç‹¬ç«‹çš„SEOé…ç½®

### æ”¯æŒçš„è¯­è¨€ä»£ç æ ‡å‡†
```php
// æ ‡å‡†è¯­è¨€ä»£ç 
'zh-cn' => 'ç®€ä½“ä¸­æ–‡',     // ä¸­å›½å¤§é™†
'zh-tw' => 'ç¹é«”ä¸­æ–‡',     // å°æ¹¾ç¹ä½“
'en'    => 'English',    // è‹±è¯­
'ja'    => 'æ—¥æœ¬èª',      // æ—¥è¯­
'ko'    => 'í•œêµ­ì–´',      // éŸ©è¯­
'vi-vn' => 'Tiáº¿ng Viá»‡t', // è¶Šå—è¯­
'th'    => 'à¹„à¸—à¸¢',        // æ³°è¯­
'es'    => 'EspaÃ±ol',    // è¥¿ç­ç‰™è¯­
'fr'    => 'FranÃ§ais',   // æ³•è¯­
'de'    => 'Deutsch',    // å¾·è¯­
'ru'    => 'Ğ ÑƒÑÑĞºĞ¸Ğ¹',    // ä¿„è¯­
'ar'    => 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',     // é˜¿æ‹‰ä¼¯è¯­
```

---

## ğŸ—„ï¸ æ•°æ®åº“å¤šè¯­è¨€è®¾è®¡

### fa_ldcms_langsè¡¨ç»“æ„æ ‡å‡†
```sql
CREATE TABLE `fa_ldcms_langs` (
  `id` int NOT NULL AUTO_INCREMENT,
  `code` varchar(20) NOT NULL COMMENT 'è¯­è¨€ä»£ç ',
  `title` varchar(50) NOT NULL COMMENT 'è¯­è¨€åç§°',
  `template` varchar(100) NOT NULL COMMENT 'æ¨¡æ¿ç›®å½•å',
  `is_default` tinyint(1) DEFAULT 0 COMMENT 'æ˜¯å¦é»˜è®¤è¯­è¨€',
  `status` tinyint(1) DEFAULT 1 COMMENT 'çŠ¶æ€',
  `weigh` int DEFAULT 0 COMMENT 'æƒé‡æ’åº',
  PRIMARY KEY (`id`),
  UNIQUE KEY `code` (`code`)
);
```

### å¤šè¯­è¨€å†…å®¹è¡¨è®¾è®¡åŸåˆ™
```sql
-- æ ç›®è¡¨å¤šè¯­è¨€å­—æ®µ
ALTER TABLE fa_ldcms_category ADD COLUMN lang varchar(10) DEFAULT 'zh-cn';

-- æ–‡æ¡£è¡¨å¤šè¯­è¨€å­—æ®µ  
ALTER TABLE fa_ldcms_document ADD COLUMN lang varchar(10) DEFAULT 'zh-cn';

-- ç«™ç‚¹ä¿¡æ¯è¡¨å¤šè¯­è¨€é…ç½®
-- fa_ldcms_siteinfo é€šè¿‡configå­—æ®µå­˜å‚¨JSONæ ¼å¼çš„å¤šè¯­è¨€é…ç½®
```

---

## ğŸ¨ æ¨¡æ¿å¤šè¯­è¨€å®ç°

### æ¨¡æ¿ç›®å½•ç»“æ„
```
addons/ldcms/view/
â”œâ”€â”€ biubiustar2025zh-cn/    # ç®€ä½“ä¸­æ–‡æ¨¡æ¿
â”œâ”€â”€ biubiustar2025zh-tw/    # ç¹ä½“ä¸­æ–‡æ¨¡æ¿
â”œâ”€â”€ biubiustar2025en/       # è‹±æ–‡æ¨¡æ¿
â”œâ”€â”€ biubiustar2025ja/       # æ—¥æ–‡æ¨¡æ¿
â”œâ”€â”€ biubiustar2025ko/       # éŸ©æ–‡æ¨¡æ¿
â””â”€â”€ biubiustar2025vi-vn/    # è¶Šå—è¯­æ¨¡æ¿
```

### è¯­è¨€ç‰¹å®šæ ·å¼å¤„ç†
```css
/* å­—ä½“é€‚é… */
.lang-zh-cn, .lang-zh-tw {
    font-family: "Microsoft YaHei", "å¾®è½¯é›…é»‘", "PingFang SC", sans-serif;
}

.lang-en {
    font-family: "Helvetica Neue", Arial, sans-serif;
}

.lang-ja {
    font-family: "Hiragino Sans", "ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ã‚·ãƒƒã‚¯", "Yu Gothic", sans-serif;
}

.lang-ko {
    font-family: "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
}

.lang-vi-vn {
    font-family: "Times New Roman", serif;
}

/* æ–‡å­—æ–¹å‘é€‚é… */
.lang-ar {
    direction: rtl;
    text-align: right;
}

/* å­—ç¬¦é—´è·é€‚é… */
.lang-ja, .lang-ko {
    letter-spacing: 0.05em;
}
```

### è¯­è¨€åˆ‡æ¢ç»„ä»¶
```html
{ld:langs}
<div class="language-switcher">
    <div class="current-lang">
        <span class="lang-icon">{$current_lang_info.icon}</span>
        <span class="lang-text">{$current_lang_info.title}</span>
        <i class="fa fa-angle-down"></i>
    </div>
    <ul class="lang-dropdown">
        {volist name="langs" id="lang"}
        <li class="{if $lang.code == $current_lang}active{/if}">
            <a href="{$lang.url}" data-lang="{$lang.code}">
                <span class="lang-icon">{$lang.icon}</span>
                <span class="lang-text">{$lang.title}</span>
            </a>
        </li>
        {/volist}
    </ul>
</div>
{/ld:langs}
```

---

## ğŸ”§ å¤šè¯­è¨€å¼€å‘æœ€ä½³å®è·µ

### 1. å†…å®¹ç®¡ç†å¤šè¯­è¨€åŒ–
```php
// æ§åˆ¶å™¨ä¸­è·å–å½“å‰è¯­è¨€å†…å®¹
public function getContent($id)
{
    $currentLang = ld_get_home_lang();
    
    $content = Document::where([
        'id' => $id,
        'lang' => $currentLang,
        'status' => 1
    ])->find();
    
    // å¦‚æœå½“å‰è¯­è¨€æ²¡æœ‰å†…å®¹ï¼Œå›é€€åˆ°é»˜è®¤è¯­è¨€
    if (!$content) {
        $defaultLang = Langs::where('is_default', 1)->value('code');
        $content = Document::where([
            'id' => $id,
            'lang' => $defaultLang,
            'status' => 1
        ])->find();
    }
    
    return $content;
}
```

### 2. URLå¤šè¯­è¨€åŒ–ç­–ç•¥
```php
// è·¯å¾„æ¨¡å¼: /en/about-us, /zh-cn/about-us
'ldcms_detail' => [
    'pattern' => '/:lang/:category/:id',
    'route' => 'addons/ldcms/detail/index',
    'option' => [
        'lang' => '[a-z-]+',
        'category' => '[\w-]+',
        'id' => '\d+'
    ]
],

// åŸŸåæ¨¡å¼: en.example.com, cn.example.com
'ldcms_domain' => [
    'pattern' => '',
    'route' => 'addons/ldcms/index/index',
    'domain' => ':lang.example.com',
    'option' => [
        'lang' => '[a-z-]+'
    ]
],
```

### 3. SEOå¤šè¯­è¨€ä¼˜åŒ–
```html
<head>
    <!-- åŸºç¡€SEO -->
    <title>{$seo_title|default=$content.title} - {$ld.sitetitle}</title>
    <meta name="description" content="{$seo_description|default=$content.description}">
    <meta name="keywords" content="{$seo_keywords}">
    
    <!-- è¯­è¨€ç›¸å…³ -->
    <html lang="{$current_lang}">
    <meta http-equiv="Content-Language" content="{$current_lang}">
    
    <!-- hreflangæ ‡ç­¾ -->
    {ld:langs}
    <link rel="alternate" hreflang="{$lang.code}" href="{$lang.url}">
    {/ld:langs}
    
    <!-- è§„èŒƒé“¾æ¥ -->
    <link rel="canonical" href="{$canonical_url}">
    
    <!-- å¼€æ”¾å›¾è°± -->
    <meta property="og:locale" content="{$current_lang}">
    <meta property="og:type" content="website">
    <meta property="og:title" content="{$seo_title}">
    <meta property="og:description" content="{$seo_description}">
    <meta property="og:url" content="{$canonical_url}">
</head>
```

### 4. è¡¨å•å¤šè¯­è¨€å¤„ç†
```html
<!-- ç•™è¨€è¡¨å•å¤šè¯­è¨€ -->
<form action="{:addon_url('ldcms/form/submit')}" method="post" class="contact-form">
    <input type="hidden" name="lang" value="{$current_lang}">
    <input type="hidden" name="form_id" value="{$form.id}">
    
    <div class="form-group">
        <label>{:lang('Name')}</label>
        <input type="text" name="name" placeholder="{:lang('Please enter your name')}" required>
    </div>
    
    <div class="form-group">
        <label>{:lang('Email')}</label>
        <input type="email" name="email" placeholder="{:lang('Please enter your email')}" required>
    </div>
    
    <div class="form-group">
        <label>{:lang('Message')}</label>
        <textarea name="message" placeholder="{:lang('Please enter your message')}" required></textarea>
    </div>
    
    <button type="submit">{:lang('Submit')}</button>
</form>
```

---

## ğŸ› ï¸ å¤šè¯­è¨€å·¥å…·å‡½æ•°

### å¸¸ç”¨å¤šè¯­è¨€å‡½æ•°
```php
// è·å–å½“å‰è¯­è¨€
function ld_get_current_lang() {
    return ld_get_home_lang();
}

// è·å–è¯­è¨€åˆ—è¡¨
function ld_get_lang_list($status = 1) {
    return Db::name('ldcms_langs')
        ->where('status', $status)
        ->order('weigh DESC, id ASC')
        ->select();
}

// ç”Ÿæˆå¤šè¯­è¨€URL
function ld_lang_url($lang, $url = null) {
    if (!$url) {
        $url = request()->url();
    }
    
    // æ ¹æ®é…ç½®çš„URLæ¨¡å¼ç”Ÿæˆå¯¹åº”è¯­è¨€çš„URL
    return addon_url('ldcms/index/index', ['lang' => $lang]);
}

// è·å–è¯­è¨€å¯¹åº”çš„æ¨¡æ¿
function ld_get_lang_template($lang) {
    return Db::name('ldcms_langs')
        ->where('code', $lang)
        ->value('template');
}
```

### æ¨¡æ¿ä¸­çš„å¤šè¯­è¨€æ ‡ç­¾
```html
<!-- è¯­è¨€åˆ‡æ¢é“¾æ¥ -->
{ld:langs}
{volist name="langs" id="lang"}
<a href="{:ld_lang_url($lang.code)}" 
   class="{if $lang.code == $current_lang}active{/if}"
   title="{$lang.title}">
    {$lang.title}
</a>
{/volist}
{/ld:langs}

<!-- å½“å‰è¯­è¨€åˆ¤æ–­ -->
{if $current_lang == 'zh-cn'}
<div class="chinese-specific-content">
    <!-- ç®€ä½“ä¸­æ–‡ç‰¹å®šå†…å®¹ -->
</div>
{elseif $current_lang == 'en'}
<div class="english-specific-content">
    <!-- è‹±æ–‡ç‰¹å®šå†…å®¹ -->
</div>
{/if}

<!-- è¯­è¨€æ–¹å‘é€‚é… -->
<div class="content-wrapper {if in_array($current_lang, ['ar', 'he'])}rtl{else}ltr{/if}">
    <!-- å†…å®¹ -->
</div>
```

---

## ğŸ“± ç§»åŠ¨ç«¯å¤šè¯­è¨€é€‚é…

### å“åº”å¼å¤šè¯­è¨€èœå•
```html
<div class="mobile-lang-switcher">
    <button class="lang-toggle" data-toggle="lang-menu">
        <span class="current-lang-flag">{$current_lang_info.flag}</span>
        <span class="current-lang-name">{$current_lang_info.short_name}</span>
        <i class="fa fa-chevron-down"></i>
    </button>
    
    <div class="lang-menu" id="lang-menu">
        {ld:langs}
        {volist name="langs" id="lang"}
        <a href="{$lang.url}" class="lang-option {if $lang.code == $current_lang}active{/if}">
            <span class="lang-flag">{$lang.flag}</span>
            <span class="lang-name">{$lang.title}</span>
        </a>
        {/volist}
        {/ld:langs}
    </div>
</div>
```

### ç§»åŠ¨ç«¯å­—ä½“é€‚é…
```css
/* ç§»åŠ¨ç«¯å¤šè¯­è¨€å­—ä½“ */
@media (max-width: 768px) {
    .lang-zh-cn, .lang-zh-tw {
        font-size: 14px;
        line-height: 1.6;
    }
    
    .lang-en {
        font-size: 14px;
        line-height: 1.5;
    }
    
    .lang-ja, .lang-ko {
        font-size: 13px;
        line-height: 1.8;
    }
    
    .lang-ar {
        font-size: 15px;
        line-height: 1.7;
        text-align: right;
    }
}
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### å¤šè¯­è¨€ç¼“å­˜ç­–ç•¥
```php
// è¯­è¨€é…ç½®ç¼“å­˜
Cache::remember('ldcms_langs_' . $lang, 3600, function() use ($lang) {
    return Db::name('ldcms_langs')
        ->where('code', $lang)
        ->find();
});

// å¤šè¯­è¨€å†…å®¹ç¼“å­˜
Cache::remember("content_{$id}_{$lang}", 1800, function() use ($id, $lang) {
    return Document::where([
        'id' => $id,
        'lang' => $lang
    ])->find();
});
```

### é™æ€èµ„æºå¤šè¯­è¨€ä¼˜åŒ–
```html
<!-- æ¡ä»¶åŠ è½½è¯­è¨€ç‰¹å®šèµ„æº -->
{if $current_lang == 'ar'}
<link rel="stylesheet" href="{ld:src src='css/rtl.css'}">
{/if}

{if in_array($current_lang, ['ja', 'ko'])}
<link rel="stylesheet" href="{ld:src src='css/cjk.css'}">
{/if}

<!-- å­—ä½“æŒ‰éœ€åŠ è½½ -->
{switch name="current_lang"}
{case value="zh-cn"}
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&display=swap" rel="stylesheet">
{/case}
{case value="ja"}
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" rel="stylesheet">
{/case}
{case value="ko"}
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
{/case}
{/switch}
```

---

## ğŸ” å¤šè¯­è¨€SEOæœ€ä½³å®è·µ

### æœç´¢å¼•æ“ä¼˜åŒ–
```html
<!-- sitemapå¤šè¯­è¨€æ”¯æŒ -->
{ld:langs}
{volist name="langs" id="lang"}
<url>
    <loc>{:addon_url('ldcms/sitemap/index', ['lang' => $lang.code], true)}</loc>
    <lastmod>{:date('c')}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.8</priority>
</url>
{/volist}
{/ld:langs}

<!-- ç»“æ„åŒ–æ•°æ®å¤šè¯­è¨€ -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{$ld.sitetitle}",
    "alternateName": {
        {ld:langs}
        "{$lang.code}": "{$lang.sitetitle}"
        {/ld:langs}
    },
    "url": "{:addon_url('ldcms/index/index', [], true)}",
    "inLanguage": [
        {ld:langs}
        "{$lang.code}"
        {/ld:langs}
    ]
}
</script>
```

---

## ğŸ“‹ å¤šè¯­è¨€å¼€å‘æ£€æŸ¥æ¸…å•

### æ•°æ®åº“é…ç½®æ£€æŸ¥
- [ ] fa_ldcms_langsè¡¨é…ç½®å®Œæ•´
- [ ] æ‰€æœ‰è¯­è¨€ä»£ç ç¬¦åˆæ ‡å‡†æ ¼å¼
- [ ] é»˜è®¤è¯­è¨€æ­£ç¡®è®¾ç½®
- [ ] æ¨¡æ¿å­—æ®µæŒ‡å‘æ­£ç¡®ç›®å½•
- [ ] æƒé‡æ’åºåˆç†è®¾ç½®

### æ¨¡æ¿å¼€å‘æ£€æŸ¥
- [ ] æ¯ä¸ªè¯­è¨€å¯¹åº”ç‹¬ç«‹æ¨¡æ¿ç›®å½•
- [ ] è¯­è¨€ç‰¹å®šCSSæ ·å¼é€‚é…
- [ ] å­—ä½“é€‰æ‹©ç¬¦åˆè¯­è¨€ç‰¹è‰²
- [ ] RTLè¯­è¨€æ”¯æŒï¼ˆå¦‚é˜¿æ‹‰ä¼¯è¯­ï¼‰
- [ ] ç§»åŠ¨ç«¯å¤šè¯­è¨€é€‚é…

### SEOä¼˜åŒ–æ£€æŸ¥
- [ ] hreflangæ ‡ç­¾æ­£ç¡®è®¾ç½®
- [ ] æ¯ä¸ªè¯­è¨€ç‰ˆæœ¬ç‹¬ç«‹URL
- [ ] sitemapåŒ…å«æ‰€æœ‰è¯­è¨€ç‰ˆæœ¬
- [ ] ç»“æ„åŒ–æ•°æ®å¤šè¯­è¨€æ”¯æŒ
- [ ] å…ƒæ ‡ç­¾å¤šè¯­è¨€ä¼˜åŒ–

### åŠŸèƒ½æµ‹è¯•æ£€æŸ¥
- [ ] è¯­è¨€åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- [ ] å†…å®¹æŒ‰è¯­è¨€æ­£ç¡®æ˜¾ç¤º
- [ ] è¡¨å•å¤šè¯­è¨€æäº¤
- [ ] æœç´¢åŠŸèƒ½å¤šè¯­è¨€æ”¯æŒ
- [ ] 404é¡µé¢å¤šè¯­è¨€é€‚é…

---

**æ³¨æ„**: æœ¬è§„èŒƒé€‚ç”¨äºFastAdmin LDCMS v1.2+ç‰ˆæœ¬çš„å¤šè¯­è¨€åŠŸèƒ½å¼€å‘ã€‚
