# 📋 Biubiustar社交媒体平台完整数据库表结构清单

> **文档目的**: 提供所有涉及表的完整字段信息，便于开发和审查
> 
> **更新时间**: 2025年1月25日
> 
> **表总数**: 14个表（7个现有表扩展，7个新增表）

---

## 📊 表结构概览

| 表名 | 类型 | 用途 | 记录数预估 |
|------|------|------|-----------|
| fa_user | 现有扩展 | 用户基础信息和社交统计 | 10,000+ |
| fa_user_group | 现有 | 用户分组管理 | 10+ |
| fa_ldcms_category | 现有 | 栏目分类管理 | 50+ |
| fa_ldcms_document | 现有 | 内容文档主表 | 50,000+ |
| fa_ldcms_document_content | 现有 | 文档内容详情 | 50,000+ |
| fa_ldcms_models | 现有扩展 | 内容模型管理 | 20+ |
| fa_attachment | 现有 | 附件文件管理 | 100,000+ |
| fa_social_follows | 新增 | 用户关注关系 | 100,000+ |
| fa_social_post_likes | 新增 | 内容点赞记录 | 500,000+ |
| fa_social_comments | 新增 | 评论系统 | 200,000+ |
| fa_social_notifications | 新增 | 通知系统 | 1,000,000+ |
| fa_social_activity_participants | 新增 | 活动参与记录 | 50,000+ |
| fa_ldcms_document_social_posts | 新增 | 社交帖子扩展 | 30,000+ |
| fa_ldcms_document_activities | 新增 | 活动信息扩展 | 5,000+ |

---

## 🔍 详细表结构

### 1. fa_user（用户表 - 扩展现有表）

| 字段名 | 类型 | 长度 | 默认值 | 允许空 | 索引 | 说明 | 状态 |
|--------|------|------|--------|--------|------|------|------|
| id | int | 10 | - | NO | PRI | 用户ID，主键 | 现有 |
| group_id | int | 10 | 1 | YES | MUL | 用户组ID | 现有 |
| username | varchar | 50 | - | NO | UNI | 用户名，唯一 | 现有 |
| nickname | varchar | 50 | - | NO | - | 用户昵称 | 现有 |
| password | varchar | 32 | - | NO | - | 密码MD5 | 现有 |
| salt | varchar | 30 | - | NO | - | 密码盐 | 现有 |
| email | varchar | 100 | - | NO | UNI | 邮箱地址 | 现有 |
| mobile | varchar | 11 | - | YES | - | 手机号码 | 现有 |
| avatar | varchar | 255 | - | YES | - | 头像路径 | 现有 |
| level | tinyint | 1 | 1 | YES | - | 用户等级 | 现有 |
| gender | tinyint | 1 | 0 | YES | - | 性别：0未知,1男,2女 | 现有 |
| birthday | date | - | NULL | YES | - | 生日 | 现有 |
| bio | varchar | 100 | - | YES | - | 个人简介 | 现有 |
| money | decimal | 10,2 | 0.00 | YES | - | 账户余额 | 现有 |
| score | int | 10 | 0 | YES | - | 积分 | 现有 |
| successions | int | 10 | 1 | YES | - | 连续登录天数 | 现有 |
| maxsuccessions | int | 10 | 1 | YES | - | 最大连续登录 | 现有 |
| prevtime | bigint | 16 | NULL | YES | - | 上次登录时间 | 现有 |
| logintime | bigint | 16 | NULL | YES | - | 本次登录时间 | 现有 |
| loginip | varchar | 50 | - | YES | - | 登录IP | 现有 |
| jointime | bigint | 16 | NULL | YES | - | 注册时间 | 现有 |
| joinip | varchar | 50 | - | YES | - | 注册IP | 现有 |
| createtime | bigint | 16 | NULL | YES | - | 创建时间 | 现有 |
| updatetime | bigint | 16 | NULL | YES | - | 更新时间 | 现有 |
| token | varchar | 59 | - | YES | - | 会话Token | 现有 |
| status | varchar | 30 | normal | NO | - | 状态：normal/hidden | 现有 |
| **followers_count** | **int** | **10** | **0** | **YES** | **MUL** | **粉丝数量** | **新增** |
| **following_count** | **int** | **10** | **0** | **YES** | **-** | **关注数量** | **新增** |
| **posts_count** | **int** | **10** | **0** | **YES** | **-** | **发帖数量** | **新增** |
| **likes_received** | **int** | **10** | **0** | **YES** | **-** | **获赞总数** | **新增** |
| **is_verified** | **tinyint** | **1** | **0** | **YES** | **-** | **是否认证用户** | **新增** |
| **cover_image** | **varchar** | **255** | **''** | **YES** | **-** | **个人主页封面图** | **新增** |
| **social_links** | **text** | **-** | **NULL** | **YES** | **-** | **社交链接JSON格式** | **新增** |

**索引设计**：
```sql
PRIMARY KEY (id)
UNIQUE KEY username (username)
UNIQUE KEY email (email)
KEY group_id (group_id)
KEY followers_count (followers_count)  -- 新增
```

---

### 2. fa_social_follows（关注关系表 - 新增）

| 字段名 | 类型 | 长度 | 默认值 | 允许空 | 索引 | 说明 |
|--------|------|------|--------|--------|------|------|
| id | int | 10 | - | NO | PRI | 关系ID，主键 |
| follower_id | int | 10 | - | NO | MUL | 关注者用户ID |
| following_id | int | 10 | - | NO | MUL | 被关注用户ID |
| create_time | bigint | 16 | NULL | YES | - | 关注时间 |
| update_time | bigint | 16 | NULL | YES | - | 更新时间 |
| status | tinyint | 1 | 1 | YES | MUL | 状态：1正常,0取消 |

**索引设计**：
```sql
PRIMARY KEY (id)
UNIQUE KEY unique_follow (follower_id, following_id)
KEY idx_follower (follower_id, status)
KEY idx_following (following_id, status)
```

---

### 3. fa_social_post_likes（点赞表 - 新增）

| 字段名 | 类型 | 长度 | 默认值 | 允许空 | 索引 | 说明 |
|--------|------|------|--------|--------|------|------|
| id | int | 10 | - | NO | PRI | 点赞ID，主键 |
| user_id | int | 10 | - | NO | MUL | 点赞用户ID |
| post_id | int | 10 | - | NO | MUL | 被点赞内容ID |
| post_type | varchar | 20 | post | YES | MUL | 内容类型：post/comment/activity |
| create_time | bigint | 16 | NULL | YES | - | 点赞时间 |
| ip | varchar | 50 | - | YES | - | 点赞IP地址 |

**索引设计**：
```sql
PRIMARY KEY (id)
UNIQUE KEY unique_like (user_id, post_id, post_type)
KEY idx_post (post_id, post_type)
KEY idx_user (user_id)
KEY idx_post_time (post_id, post_type, create_time)
```

---

### 4. fa_social_comments（评论表 - 新增）

| 字段名 | 类型 | 长度 | 默认值 | 允许空 | 索引 | 说明 |
|--------|------|------|--------|--------|------|------|
| id | int | 10 | - | NO | PRI | 评论ID，主键 |
| user_id | int | 10 | - | NO | MUL | 评论用户ID |
| post_id | int | 10 | - | NO | MUL | 被评论内容ID |
| post_type | varchar | 20 | post | YES | MUL | 内容类型：post/activity |
| parent_id | int | 10 | 0 | YES | MUL | 父评论ID，0为顶级评论 |
| reply_to_user_id | int | 10 | 0 | YES | - | 回复给谁的用户ID |
| content | text | - | - | NO | - | 评论内容 |
| ip | varchar | 50 | - | YES | - | 评论IP地址 |
| likes_count | int | 10 | 0 | YES | - | 评论点赞数 |
| replies_count | int | 10 | 0 | YES | - | 回复数量 |
| status | tinyint | 1 | 1 | YES | MUL | 状态：1正常,0删除,2审核中 |
| create_time | bigint | 16 | NULL | YES | MUL | 创建时间 |
| update_time | bigint | 16 | NULL | YES | - | 更新时间 |
| delete_time | bigint | 16 | NULL | YES | - | 删除时间 |

**索引设计**：
```sql
PRIMARY KEY (id)
KEY idx_post (post_id, post_type, status)
KEY idx_user (user_id)
KEY idx_parent (parent_id)
KEY idx_post_time (post_id, post_type, create_time)
```

---

### 5. fa_social_notifications（通知表 - 新增）

| 字段名 | 类型 | 长度 | 默认值 | 允许空 | 索引 | 说明 |
|--------|------|------|--------|--------|------|------|
| id | int | 10 | - | NO | PRI | 通知ID，主键 |
| user_id | int | 10 | - | NO | MUL | 接收通知用户ID |
| from_user_id | int | 10 | 0 | YES | MUL | 触发通知用户ID |
| type | varchar | 50 | - | NO | MUL | 通知类型 |
| title | varchar | 255 | - | NO | - | 通知标题 |
| content | text | - | - | YES | - | 通知内容 |
| data | text | - | - | YES | - | 附加数据JSON格式 |
| url | varchar | 255 | - | YES | - | 关联URL |
| is_read | tinyint | 1 | 0 | YES | MUL | 是否已读：0未读,1已读 |
| is_deleted | tinyint | 1 | 0 | YES | - | 是否删除：0正常,1删除 |
| create_time | bigint | 16 | NULL | YES | MUL | 创建时间 |
| read_time | bigint | 16 | NULL | YES | - | 阅读时间 |
| expire_time | bigint | 16 | NULL | YES | - | 过期时间 |

**通知类型枚举**：
- `follow` - 关注通知
- `like` - 点赞通知
- `comment` - 评论通知
- `reply` - 回复通知
- `mention` - @提及通知
- `system` - 系统通知
- `activity` - 活动通知

**索引设计**：
```sql
PRIMARY KEY (id)
KEY idx_user_read (user_id, is_read, is_deleted)
KEY idx_type (type)
KEY idx_create_time (create_time)
KEY idx_from_user (from_user_id)
```

---

### 6. fa_social_activity_participants（活动参与表 - 新增）

| 字段名 | 类型 | 长度 | 默认值 | 允许空 | 索引 | 说明 |
|--------|------|------|--------|--------|------|------|
| id | int | 10 | - | NO | PRI | 参与ID，主键 |
| activity_id | int | 10 | - | NO | MUL | 活动ID |
| user_id | int | 10 | - | NO | MUL | 参与用户ID |
| status | varchar | 20 | registered | YES | MUL | 参与状态 |
| remark | text | - | - | YES | - | 备注信息 |
| register_time | bigint | 16 | NULL | YES | - | 报名时间 |
| attend_time | bigint | 16 | NULL | YES | - | 签到时间 |
| create_time | bigint | 16 | NULL | YES | - | 创建时间 |
| update_time | bigint | 16 | NULL | YES | - | 更新时间 |

**参与状态枚举**：
- `registered` - 已报名
- `attended` - 已参加
- `cancelled` - 已取消

**索引设计**：
```sql
PRIMARY KEY (id)
UNIQUE KEY unique_participant (activity_id, user_id)
KEY idx_activity (activity_id, status)
KEY idx_user (user_id)
```

---

### 7. fa_ldcms_document_social_posts（社交帖子扩展表 - 新增）

| 字段名 | 类型 | 长度 | 默认值 | 允许空 | 索引 | 说明 |
|--------|------|------|--------|--------|------|------|
| id | int | 10 | - | NO | PRI | 扩展ID，主键 |
| document_id | int | 10 | - | NO | UNI | 关联文档ID |
| post_type | enum | - | text | YES | MUL | 帖子类型 |
| media_files | text | - | - | YES | - | 媒体文件JSON |
| hashtags | varchar | 500 | - | YES | MUL | 话题标签，逗号分隔 |
| location | varchar | 255 | - | YES | - | 位置信息 |
| location_lat | varchar | 20 | - | YES | - | 纬度 |
| location_lng | varchar | 20 | - | YES | - | 经度 |
| privacy_level | enum | - | public | YES | MUL | 隐私级别 |
| is_featured | tinyint | 1 | 0 | YES | MUL | 是否精选 |
| allow_comment | tinyint | 1 | 1 | YES | - | 允许评论 |
| allow_share | tinyint | 1 | 1 | YES | - | 允许分享 |
| share_count | int | 10 | 0 | YES | - | 分享次数 |
| comment_count | int | 10 | 0 | YES | - | 评论数量 |
| mood | varchar | 50 | - | YES | - | 心情状态 |
| mention_users | text | - | - | YES | - | 提及用户JSON |
| create_time | bigint | 16 | NULL | YES | - | 创建时间 |
| update_time | bigint | 16 | NULL | YES | - | 更新时间 |

**帖子类型枚举**：
- `text` - 纯文本
- `image` - 图片
- `video` - 视频
- `mixed` - 混合媒体

**隐私级别枚举**：
- `public` - 公开
- `followers` - 仅粉丝可见
- `private` - 私密

**索引设计**：
```sql
PRIMARY KEY (id)
UNIQUE KEY idx_document (document_id)
KEY idx_post_type (post_type)
KEY idx_privacy (privacy_level)
KEY idx_featured (is_featured)
```

---

### 8. fa_ldcms_document_activities（活动信息扩展表 - 新增）

| 字段名 | 类型 | 长度 | 默认值 | 允许空 | 索引 | 说明 |
|--------|------|------|--------|--------|------|------|
| id | int | 10 | - | NO | PRI | 扩展ID，主键 |
| document_id | int | 10 | - | NO | UNI | 关联文档ID |
| activity_type | varchar | 50 | event | YES | MUL | 活动类型 |
| activity_status | varchar | 20 | draft | YES | MUL | 活动状态 |
| start_time | bigint | 16 | NULL | YES | MUL | 开始时间 |
| end_time | bigint | 16 | NULL | YES | - | 结束时间 |
| register_start | bigint | 16 | NULL | YES | - | 报名开始时间 |
| register_end | bigint | 16 | NULL | YES | - | 报名结束时间 |
| location | varchar | 255 | - | YES | - | 活动地点 |
| location_detail | text | - | - | YES | - | 详细地址 |
| location_lat | varchar | 20 | - | YES | - | 纬度 |
| location_lng | varchar | 20 | - | YES | - | 经度 |
| max_participants | int | 10 | 0 | YES | - | 最大参与人数，0无限制 |
| current_participants | int | 10 | 0 | YES | - | 当前参与人数 |
| min_participants | int | 10 | 0 | YES | - | 最少参与人数 |
| fee | decimal | 10,2 | 0.00 | YES | - | 参与费用 |
| fee_type | varchar | 10 | free | YES | - | 费用类型：free/paid |
| registration_required | tinyint | 1 | 0 | YES | - | 是否需要报名 |
| need_approval | tinyint | 1 | 0 | YES | - | 是否需要审批 |
| contact_info | text | - | - | YES | - | 联系方式JSON |
| requirements | text | - | - | YES | - | 参与要求 |
| schedule | text | - | - | YES | - | 活动日程JSON |
| organizer | varchar | 255 | - | YES | - | 主办方 |
| sponsor | varchar | 255 | - | YES | - | 赞助商 |
| extra_fields | text | - | - | YES | - | 扩展字段JSON |
| create_time | bigint | 16 | NULL | YES | - | 创建时间 |
| update_time | bigint | 16 | NULL | YES | - | 更新时间 |

**活动类型枚举**：
- `event` - 活动
- `meetup` - 聚会
- `workshop` - 工作坊
- `competition` - 竞赛

**活动状态枚举**：
- `draft` - 草稿
- `published` - 已发布
- `ongoing` - 进行中
- `completed` - 已完成
- `cancelled` - 已取消

**索引设计**：
```sql
PRIMARY KEY (id)
UNIQUE KEY idx_document (document_id)
KEY idx_activity_type (activity_type)
KEY idx_activity_status (activity_status)
KEY idx_start_time (start_time)
```

---

### 9. fa_ldcms_category（栏目分类表 - 现有表参考）

| 字段名 | 类型 | 长度 | 默认值 | 允许空 | 索引 | 说明 |
|--------|------|------|--------|--------|------|------|
| id | int | 10 | - | NO | PRI | 栏目ID，主键 |
| name | varchar | 50 | - | NO | - | 栏目名称 |
| ename | varchar | 50 | - | YES | - | 英文名称 |
| pid | int | 10 | 0 | YES | MUL | 父栏目ID |
| mid | int | 10 | 1 | YES | MUL | 模型ID |
| urlname | varchar | 50 | - | NO | MUL | URL标识 |
| template_list | varchar | 100 | - | YES | - | 列表页模板 |
| template_detail | varchar | 100 | - | YES | - | 详情页模板 |
| outlink | varchar | 255 | - | YES | - | 外部链接 |
| image | varchar | 255 | - | YES | - | 栏目图片 |
| big_image | varchar | 255 | - | YES | - | 栏目大图 |
| seo_title | varchar | 255 | - | YES | - | SEO标题 |
| seo_keywords | varchar | 255 | - | YES | - | SEO关键词 |
| seo_description | text | - | - | YES | - | SEO描述 |
| sort | int | 10 | 0 | YES | MUL | 排序 |
| lang | varchar | 10 | zh-cn | YES | MUL | 语言标识 |
| type | tinyint | 1 | 0 | YES | - | 栏目类型：0列表,1单页 |
| status | tinyint | 1 | 1 | YES | MUL | 状态：0禁用,1启用 |
| is_nav | tinyint | 1 | 1 | YES | - | 是否导航显示 |
| create_time | bigint | 16 | NULL | YES | - | 创建时间 |
| update_time | bigint | 16 | NULL | YES | - | 更新时间 |

---

### 10. fa_ldcms_document（文档表 - 现有表参考）

| 字段名 | 类型 | 长度 | 默认值 | 允许空 | 索引 | 说明 |
|--------|------|------|--------|--------|------|------|
| id | int | 10 | - | NO | PRI | 文档ID，主键 |
| mid | int | 10 | 1 | YES | MUL | 模型ID |
| cid | int | 10 | 0 | YES | MUL | 栏目ID |
| sub_cid | int | 10 | 0 | YES | - | 子栏目ID |
| title | varchar | 255 | - | NO | MUL | 文档标题 |
| image | varchar | 255 | - | YES | - | 缩略图 |
| pics | text | - | - | YES | - | 图片集合 |
| show_time | bigint | 16 | NULL | YES | MUL | 显示时间 |
| seo_keywords | varchar | 255 | - | YES | - | SEO关键词 |
| seo_description | text | - | - | YES | - | SEO描述 |
| visits | int | 10 | 0 | YES | MUL | 访问量 |
| likes | int | 10 | 0 | YES | MUL | 点赞数 |
| admin_id | int | 10 | 0 | YES | MUL | 发布用户ID |
| author | varchar | 50 | - | YES | - | 作者 |
| sort | int | 10 | 0 | YES | MUL | 排序 |
| lang | varchar | 10 | zh-cn | YES | MUL | 语言标识 |
| flag | varchar | 100 | - | YES | MUL | 标记：hot/new/recommend |
| tag | varchar | 255 | - | YES | MUL | 标签 |
| outlink | varchar | 255 | - | YES | - | 外部链接 |
| custom_urlname | varchar | 100 | - | YES | - | 自定义URL |
| gid | int | 10 | 0 | YES | - | 用户组权限 |
| status | tinyint | 1 | 1 | YES | MUL | 状态：0禁用,1启用 |
| create_time | bigint | 16 | NULL | YES | MUL | 创建时间 |
| update_time | bigint | 16 | NULL | YES | - | 更新时间 |
| delete_time | bigint | 16 | NULL | YES | - | 删除时间 |

---

## 📊 索引汇总表

| 表名 | 索引类型 | 索引名 | 字段 | 用途 |
|------|----------|--------|------|------|
| fa_user | PRIMARY | PRIMARY | id | 主键 |
| fa_user | UNIQUE | username | username | 用户名唯一 |
| fa_user | UNIQUE | email | email | 邮箱唯一 |
| fa_user | INDEX | followers_count | followers_count | 粉丝排行 |
| fa_social_follows | PRIMARY | PRIMARY | id | 主键 |
| fa_social_follows | UNIQUE | unique_follow | follower_id, following_id | 防重复关注 |
| fa_social_follows | INDEX | idx_follower | follower_id, status | 我的关注 |
| fa_social_follows | INDEX | idx_following | following_id, status | 我的粉丝 |
| fa_social_post_likes | PRIMARY | PRIMARY | id | 主键 |
| fa_social_post_likes | UNIQUE | unique_like | user_id, post_id, post_type | 防重复点赞 |
| fa_social_post_likes | INDEX | idx_post | post_id, post_type | 内容点赞列表 |
| fa_social_comments | PRIMARY | PRIMARY | id | 主键 |
| fa_social_comments | INDEX | idx_post | post_id, post_type, status | 内容评论列表 |
| fa_social_comments | INDEX | idx_parent | parent_id | 子评论查询 |
| fa_social_notifications | PRIMARY | PRIMARY | id | 主键 |
| fa_social_notifications | INDEX | idx_user_read | user_id, is_read, is_deleted | 用户通知列表 |

---

## 🔧 数据库创建脚本

### 扩展现有表
```sql
-- 扩展用户表
ALTER TABLE `fa_user` ADD COLUMN `followers_count` int(10) DEFAULT 0 COMMENT '粉丝数量';
ALTER TABLE `fa_user` ADD COLUMN `following_count` int(10) DEFAULT 0 COMMENT '关注数量';
ALTER TABLE `fa_user` ADD COLUMN `posts_count` int(10) DEFAULT 0 COMMENT '发帖数量';
ALTER TABLE `fa_user` ADD COLUMN `likes_received` int(10) DEFAULT 0 COMMENT '获赞总数';
ALTER TABLE `fa_user` ADD COLUMN `is_verified` tinyint(1) DEFAULT 0 COMMENT '是否认证用户';
ALTER TABLE `fa_user` ADD COLUMN `cover_image` varchar(255) DEFAULT '' COMMENT '个人主页封面图';
ALTER TABLE `fa_user` ADD COLUMN `social_links` text COMMENT '社交链接JSON格式';
ALTER TABLE `fa_user` ADD INDEX `idx_followers_count` (`followers_count`);

-- 扩展模型表
INSERT INTO `fa_ldcms_models` (`name`, `table_name`, `description`, `status`, `ismenu`) VALUES
('社交帖子', 'social_posts', '用户发布的社交媒体帖子', 1, 1),
('活动信息', 'activities', '平台活动信息管理', 1, 1),
('热门话题', 'topics', '热门话题标签管理', 1, 1);
```

### 创建新表
```sql
-- 关注关系表
CREATE TABLE `fa_social_follows` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `follower_id` int(10) unsigned NOT NULL COMMENT '关注者用户ID',
  `following_id` int(10) unsigned NOT NULL COMMENT '被关注用户ID',
  `create_time` bigint(16) DEFAULT NULL COMMENT '关注时间',
  `update_time` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `status` tinyint(1) DEFAULT 1 COMMENT '状态：1正常,0取消',
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_follow` (`follower_id`,`following_id`),
  KEY `idx_follower` (`follower_id`,`status`),
  KEY `idx_following` (`following_id`,`status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户关注关系表';

-- 点赞表
CREATE TABLE `fa_social_post_likes` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(10) unsigned NOT NULL COMMENT '点赞用户ID',
  `post_id` int(10) unsigned NOT NULL COMMENT '被点赞内容ID',
  `post_type` varchar(20) DEFAULT 'post' COMMENT '内容类型：post/comment/activity',
  `create_time` bigint(16) DEFAULT NULL COMMENT '点赞时间',
  `ip` varchar(50) DEFAULT '' COMMENT '点赞IP地址',
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_like` (`user_id`,`post_id`,`post_type`),
  KEY `idx_post` (`post_id`,`post_type`),
  KEY `idx_user` (`user_id`),
  KEY `idx_post_time` (`post_id`,`post_type`,`create_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='帖子点赞表';

-- 评论表
CREATE TABLE `fa_social_comments` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(10) unsigned NOT NULL COMMENT '评论用户ID',
  `post_id` int(10) unsigned NOT NULL COMMENT '被评论内容ID',
  `post_type` varchar(20) DEFAULT 'post' COMMENT '内容类型：post/activity',
  `parent_id` int(10) unsigned DEFAULT 0 COMMENT '父评论ID，0为顶级评论',
  `reply_to_user_id` int(10) unsigned DEFAULT 0 COMMENT '回复给谁的用户ID',
  `content` text NOT NULL COMMENT '评论内容',
  `ip` varchar(50) DEFAULT '' COMMENT '评论IP地址',
  `likes_count` int(10) DEFAULT 0 COMMENT '评论点赞数',
  `replies_count` int(10) DEFAULT 0 COMMENT '回复数量',
  `status` tinyint(1) DEFAULT 1 COMMENT '状态：1正常,0删除,2审核中',
  `create_time` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `update_time` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `delete_time` bigint(16) DEFAULT NULL COMMENT '删除时间',
  PRIMARY KEY (`id`),
  KEY `idx_post` (`post_id`,`post_type`,`status`),
  KEY `idx_user` (`user_id`),
  KEY `idx_parent` (`parent_id`),
  KEY `idx_post_time` (`post_id`,`post_type`,`create_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='评论表';

-- 通知表
CREATE TABLE `fa_social_notifications` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(10) unsigned NOT NULL COMMENT '接收通知用户ID',
  `from_user_id` int(10) unsigned DEFAULT 0 COMMENT '触发通知用户ID',
  `type` varchar(50) NOT NULL COMMENT '通知类型',
  `title` varchar(255) NOT NULL COMMENT '通知标题',
  `content` text COMMENT '通知内容',
  `data` text COMMENT '附加数据JSON格式',
  `url` varchar(255) DEFAULT '' COMMENT '关联URL',
  `is_read` tinyint(1) DEFAULT 0 COMMENT '是否已读：0未读,1已读',
  `is_deleted` tinyint(1) DEFAULT 0 COMMENT '是否删除：0正常,1删除',
  `create_time` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `read_time` bigint(16) DEFAULT NULL COMMENT '阅读时间',
  `expire_time` bigint(16) DEFAULT NULL COMMENT '过期时间',
  PRIMARY KEY (`id`),
  KEY `idx_user_read` (`user_id`,`is_read`,`is_deleted`),
  KEY `idx_type` (`type`),
  KEY `idx_create_time` (`create_time`),
  KEY `idx_from_user` (`from_user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='通知表';

-- 活动参与表
CREATE TABLE `fa_social_activity_participants` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `activity_id` int(10) unsigned NOT NULL COMMENT '活动ID',
  `user_id` int(10) unsigned NOT NULL COMMENT '参与用户ID',
  `status` varchar(20) DEFAULT 'registered' COMMENT '参与状态：registered/attended/cancelled',
  `remark` text COMMENT '备注信息',
  `register_time` bigint(16) DEFAULT NULL COMMENT '报名时间',
  `attend_time` bigint(16) DEFAULT NULL COMMENT '签到时间',
  `create_time` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `update_time` bigint(16) DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_participant` (`activity_id`,`user_id`),
  KEY `idx_activity` (`activity_id`,`status`),
  KEY `idx_user` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='活动参与表';

-- 社交帖子扩展表
CREATE TABLE `fa_ldcms_document_social_posts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `document_id` int(10) unsigned NOT NULL COMMENT '关联文档ID',
  `post_type` enum('text','image','video','mixed') DEFAULT 'text' COMMENT '帖子类型',
  `media_files` text COMMENT '媒体文件JSON',
  `hashtags` varchar(500) DEFAULT '' COMMENT '话题标签，逗号分隔',
  `location` varchar(255) DEFAULT '' COMMENT '位置信息',
  `location_lat` varchar(20) DEFAULT '' COMMENT '纬度',
  `location_lng` varchar(20) DEFAULT '' COMMENT '经度',
  `privacy_level` enum('public','followers','private') DEFAULT 'public' COMMENT '隐私级别',
  `is_featured` tinyint(1) DEFAULT 0 COMMENT '是否精选',
  `allow_comment` tinyint(1) DEFAULT 1 COMMENT '允许评论',
  `allow_share` tinyint(1) DEFAULT 1 COMMENT '允许分享',
  `share_count` int(10) DEFAULT 0 COMMENT '分享次数',
  `comment_count` int(10) DEFAULT 0 COMMENT '评论数量',
  `mood` varchar(50) DEFAULT '' COMMENT '心情状态',
  `mention_users` text COMMENT '提及用户JSON',
  `create_time` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `update_time` bigint(16) DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_document` (`document_id`),
  KEY `idx_post_type` (`post_type`),
  KEY `idx_privacy` (`privacy_level`),
  KEY `idx_featured` (`is_featured`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='社交帖子扩展表';

-- 活动信息扩展表
CREATE TABLE `fa_ldcms_document_activities` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `document_id` int(10) unsigned NOT NULL COMMENT '关联文档ID',
  `activity_type` varchar(50) DEFAULT 'event' COMMENT '活动类型：event/meetup/workshop/competition',
  `activity_status` varchar(20) DEFAULT 'draft' COMMENT '活动状态：draft/published/ongoing/completed/cancelled',
  `start_time` bigint(16) DEFAULT NULL COMMENT '开始时间',
  `end_time` bigint(16) DEFAULT NULL COMMENT '结束时间',
  `register_start` bigint(16) DEFAULT NULL COMMENT '报名开始时间',
  `register_end` bigint(16) DEFAULT NULL COMMENT '报名结束时间',
  `location` varchar(255) DEFAULT '' COMMENT '活动地点',
  `location_detail` text COMMENT '详细地址',
  `location_lat` varchar(20) DEFAULT '' COMMENT '纬度',
  `location_lng` varchar(20) DEFAULT '' COMMENT '经度',
  `max_participants` int(10) DEFAULT 0 COMMENT '最大参与人数，0无限制',
  `current_participants` int(10) DEFAULT 0 COMMENT '当前参与人数',
  `min_participants` int(10) DEFAULT 0 COMMENT '最少参与人数',
  `fee` decimal(10,2) DEFAULT 0.00 COMMENT '参与费用',
  `fee_type` varchar(10) DEFAULT 'free' COMMENT '费用类型：free/paid',
  `registration_required` tinyint(1) DEFAULT 0 COMMENT '是否需要报名',
  `need_approval` tinyint(1) DEFAULT 0 COMMENT '是否需要审批',
  `contact_info` text COMMENT '联系方式JSON',
  `requirements` text COMMENT '参与要求',
  `schedule` text COMMENT '活动日程JSON',
  `organizer` varchar(255) DEFAULT '' COMMENT '主办方',
  `sponsor` varchar(255) DEFAULT '' COMMENT '赞助商',
  `extra_fields` text COMMENT '扩展字段JSON',
  `create_time` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `update_time` bigint(16) DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `idx_document` (`document_id`),
  KEY `idx_activity_type` (`activity_type`),
  KEY `idx_activity_status` (`activity_status`),
  KEY `idx_start_time` (`start_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='活动信息扩展表';
```

---

## 📋 检查清单

### 表结构完整性
- [x] 所有表都有主键
- [x] 外键关系明确定义
- [x] 字段类型合理选择
- [x] 必要的NOT NULL约束
- [x] 合理的DEFAULT值

### 索引优化
- [x] 主键索引
- [x] 唯一索引防重复
- [x] 外键字段索引
- [x] 高频查询字段索引
- [x] 复合索引顺序优化

### 扩展性
- [x] JSON字段支持灵活扩展
- [x] 枚举值预留扩展空间
- [x] 状态字段统一设计
- [x] 多语言支持完善

### 性能考虑
- [x] 统计字段冗余设计
- [x] 分页查询优化
- [x] 缓存友好设计
- [x] 索引覆盖查询

---

> **总结**: 本表结构设计包含14个表，新增7个表，扩展7个现有表。通过合理的字段设计、索引优化和关系定义，能够支撑社交媒体平台的核心功能需求，同时保持与现有系统的兼容性。建议在实施前进行充分的性能测试和容量规划。